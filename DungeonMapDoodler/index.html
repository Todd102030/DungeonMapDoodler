<!DOCTYPE HTML>
<html>
    <head>
		<title>Dungeon Map Doodler</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <meta property="og:image" content="https://dungeonmapdoodler.ca/images/background.png" />
      	<link rel="stylesheet" type="text/css" href="style.css">
        <link rel="apple-touch-icon" href="touch-icon-iphone.png">
        <link rel="apple-touch-icon" sizes="152x152" href="icon-152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="icon-180.png">
        <link rel="apple-touch-icon" sizes="167x167" href="icon-167.png">
      	<!--<link rel="stylesheet" type="text/css" href="style2.css">-->
		<link rel="manifest" href="manifest.json">
        <link rel="icon" type="image/png"   href="icon-192.png">
        <style>
        /*.appContent {
            transition: opacity 0.5s;
            opacity: 0;
        }

        .appContent.loaded {
            opacity: 1;
        }*/
            .loaderr {
              position: fixed;
              left: 0px;
              top: 0px;
              width: 100%;
              height: 100%;
              z-index: 9999;
              background-color: rgb(196, 196, 196);
            }
        </style>
    </head>
<body onload='doodler.show()'>
 <div class="loaderr" id='loaderr' style='text-align: center;display:flex;flex-direction: row;flex-wrap: wrap;justify-content: center;align-content: center;align-items: center;'><div><img src='icon-192.png'><h1 >Dungeon Map Doodler</h1><div class='loader'></div><br>Loading...</div></div>
    <script type="text/javascript">
        window.addEventListener("load",function(){
            document.getElementById("loaderr").style.display = "none";
        });
 
</script>
	<div class='flex-container appContent' id='appContent'>
		<div class='topBar' style='text-align: right'>
			<nav id="nav">
				<ul id="navigation">
					<li><a href="/">Dungeon Map Doodler</a></li>
					<li><a href="#">File &raquo;</a>
						<ul>
                            <li><a href="#" onclick="ir.show('dimensionPopup');doodler.popupShowing=true;">New Map</a></li>
							<li><a href="#" onclick="return doodler.saveFile()">Save</a></li>
							<li><a href="#" onclick="return doodler.showFileLoad()">Load</a></li>
							<li><a href="#" onclick="return doodler.saveImage()">Export Image</a></li>
							<li><a href="#" onclick="return doodler.exportImage()" alt="Publish to fictionalmaps.com" title="Publish to fictionalmaps.com">Publish Map</a></li>

						</ul>
					</li>
					<li><a href="#">Grid &raquo;</a>
						<ul>
							<li><a href="#" onclick="return doodler.toggleGridOutside()">Toggle Outer Grid</a></li>
							<li><a href="#" onclick="return doodler.toggleGrid()">Toggle Entire Grid</a></li>
							<li><a href="#" onclick="ir.show('dimensionPopup');doodler.popupShowing=true;">Change Grid Dimensions</a></li>
						</ul>
					</li>
					<li><a href="#">Options &raquo;</a>
						<ul>
							<li><a href="#" onclick="doodler.toggleToolDock()">Dock/Undock Tools</a></li>
						</ul>
					</li>
                    <li><a href="#">Tools &raquo;</a>
						<ul>
							<li><a href="#" onclick="doodler.showDonJonLoad()">Import donjon Map</a></li>
							<li><a href="#" onclick="doodler.showGenerateDungeonPopup()">Generate Dungeon</a></li>
						</ul>
					</li>
                    <li><a href="#" class="last">Info &raquo;</a>
                        <ul>
							<li><a href="#" onclick="doodler.showAboutPopup()">About</a></li>
							<li><a href="#" onclick="doodler.showHowToPopup()">How To</a></li>
						</ul>
                    </li>
				</ul>
			</nav>
		</div>
		
		<div id='doodler'>
			<canvas id="warehouseCanvas" width="800" height="800" ></canvas>  
			<div style='display:none'>
			<input type='file' id="imageUpload" accept=".dmd"/>
			<input type='file' id="donJonUpload" accept=".tsv, .txt"/>
			<div style="display:inline-block">
				<label id='whImgLabel' for="whImgSlider">Background Visibility 40%</label><br>
				<input id="whImgSlider" type="range" min="0" max="1" step="0.01" value="0.40">
			</div>
			</div>

		</div>
	</div>
	
<div style='display:none;'>
	<img id='squarefuzzImg' src='images/squarefuzz.png'>
	<img id='circlefuzzImg' src='images/circlefuzz.png'>
	<img id='hatchingImg' src='hatching.png'>
	<img id='hatchingImgDots' src='hatches/dots.svg'>
	<img id='hatchingImgJPCrosshatch' src='hatches/DMD Crosshatch Pattern.svg'>
	<img id='hatchingImgJPHalftone' src='hatches/DMD Halftone Pattern.svg'>
	<img id='hatchingImgJPStipple' src='hatches/DMD Stipple Pattern.svg'>
	<img id='hatchingImgJPStone' src='hatches/DMD Stone Pattern.svg'>
	<img id='hatchingImgJPGrass' src='hatches/DMG Grass Pattern.svg'>
	<img id='hatchingImgSolidBlack' src='hatches/solidblack.png'>
	<img id='hatchingImgGrass' src='floortiles/grasstile.jpg'>
	<img id='hatchingImgRock' src='floortiles/rocktile.jpg'>
    
	<img id='brick1' src='floortiles/brick1.svg'>
	<img id='metal1' src='floortiles/metal1.svg'>
	<img id='wood1' src='floortiles/wood1.svg'>
	<img id='magma1' src='floortiles/magma1.svg'>
	<img id='sand1' src='floortiles/sand1.svg'>
	<img id='sand2' src='floortiles/sand2.svg'>
	<img id='space1' src='floortiles/space1.svg'>
	<img id='space2' src='floortiles/space2.svg'>
	<img id='space3' src='floortiles/space3.svg'>
	<img id='space4' src='floortiles/space4.svg'>
	<img id='stone1' src='floortiles/stone1.svg'>
	<img id='water1' src='floortiles/water1.svg'>
	
	
	<label for='imageSaveIsometric'><input type='checkbox' id='imageSaveIsometric'> Isometric</label>
	
</div>	
	

	
<div id='aboutPopup' class='popupPanel' style='display:none;text-align: left;padding:20px;'>
    <div id="aboutPopupContent" style="max-height: calc( 100% - 38px ); overflow: auto;">
        <h3>About</h3>
        <p>Dungeon Map Doodler is a program designed to easily create tabletop RPG maps created by Todd Ross (<a target="_blank" rel="noopener noreferrer" href='https://twitter.com/ToddRossDIY'>@ToddRossDIY</a>). This project is in early development stages and there will likely be bugs and other issues with it. I appreciate your patience in using this software and look forward to continuing to improve it!</p>
        
        <h3>Commercial Use Policy</h3>
        <p>Any maps you create with the intention of distributing for free whether by itself or as a part of a larger project can be included under the same licensing that the rest of your content is being released as. 
        <br><br>
        If you are making money with your creations, I ask that you become a patron of the $5 tier or higher to help support continued development of the project. If you're not a patron already, you can join at (<a target="_blank" rel="noopener noreferrer" href='https://www.patreon.com/bePatron?u=17254686'>https://www.patreon.com/bePatron?u=17254686</a>). If this small cost is prohibitive to you, please contact me and we can work something out!
        <br><br>
        While not mandatory, I would appreciate if you give credit so that people can see where the maps were made and have the opportunity to try the software out themselves. This can be as simple as a footnote along the lines of "Maps created at dungeonmapdoodler.com"</p>
        
        <h3>Credits</h3>
        Most Stamps, Interface Icons:<br>
        Andrew Landmine<br>
        <a href='https://twitter.com/landmine752'>@landmine752</a>
        <br><br>
        Monster Stamps:<br>
        Rene Carbonell<br>
        Reneplicant@protonmail.com<br>
        
        
        <h3>Contact Us</h3>
        <p>For any questions, bug reports or other comments, please email me at <a target="_blank" rel="noopener noreferrer" href='mailto:tross5000@gmail.com?subject=Dungeon Map Doodler Inquiry'>tross5000@gmail.com</a></p>
    </div>
    <div class='popupFooter' style='padding-top: 8px;text-align: center'>
        <button type="button" class="canvBtn" onclick="ir.hide('aboutPopup');doodler.popupShowing = false;">Cancel</button>
    </div>
</div>
    
<div id='howToPopup' class='popupPanel' style='display:none;text-align: left;padding:20px;'>
    <div id="howToPopupContent" style="max-height: calc( 100% - 38px ); overflow: auto;">
        <h3>How To Use Dungeon Map Doodler</h3>
        <p>Dungeon Map Doodler is a tool for quickly designing RPG game maps with a hand drawn feel. It's designed to be very intuitive to use and work on as many devices as possible. It's still in early stages of development, so if you find any issues with it, please reach out to me using the contact info in the About section. <b>Note:</b> If you notice anything not working as expected, please first try forcing a reload by holding Ctrl and pressing F5. The offline support can cause new code to not always get downloaded from the server when updates are released, giving the appearance of something not working correctly.</p>
        
        <h4>General Questions</h4>
        <h5>How to install to home screen/desktop for offline use</h5>
        <p>Instructions for this can be a little different for all web browsers and operating systems. For Chrome on a desktop, you should see a "+ Install" button in the top right of your screen in the URL bar. On Chrome for Android, a popup will typically appear at the bottom of the screen mentioning that it's possible to add to your home screen. On Apple devices, the Share button in Safari should have an option to add to your home screen.</p>
        
        <h5>Different Between Saving and Exporting</h5>
        <p>If you want to close the window and come back to work on your map later, you'll want to use the "Save" option in the File menu. This creates a ".dmd" file which can then be loaded back into the software using the "Load" option. To save your map as a PNG image or other image format, you'll want to use the "Export Image" option. This creates an actual image file that you can then print, open in any other image editing program or send to your friends. You can also choose a background colour for the image, or choose to make it transparent.</p>
        
        <h4>Drawing Tools</h4>
        <h5>Snap To Grid</h5>
        <p>The Snap To Grid tool allows you to quickly draw while snapping your cursor to the visible grid, filling in entire squares at a time. Use this to create straight hallways, rooms and any other structures where you want to have a solid feel to the room.</p>
        <h5>Free Draw</h5>
        <p>The Free Draw tool allows you to freehand draw anything you'd like! It has a few options for size, hatch size, wall thickness, shape and colour. This can be used for drawing more organic shapes like the outline of a forest, a winding path or anything else that you don't want snapped to the grid.</p>
        <h5>Line Tool</h5>
        <p>The Line tool lets you draw a straight line from one point to another. Click and hold to start a line, and release it at the end of the line. Use this tool to draw straight lines at any angle.</p>
        <h5>Wall Tool</h5>
        <p>The Interior Wall tool acts like a thin eraser to let you draw walls inside of a larger room. Similar to the Line tool, click and hold to start a wall, and release at the end of the line.</p>
        <h5>Room Tool</h5>
        <p>The Room tool is similar to the Snap To Grid tool, but allows you to fill in large rectangles at a time. Click and hold to drag out a rectangle the size that you want for your room and release to create the room. This tool is optionally snap to grid, and can be used in Subtractive mode as well. Enabling this will delete the floor of your room rather than adding to it, and can be used for all sorts of cool designs, especially when combined with the Shape tool.</p>
        <h5>Shape Tool</h5>
        <p>The Shape Tool is similar to the Room tool, but lets you draw regular polygons of any number of sides. To draw, click and drag from the center of your shape and pull your mouse outwards. The distance from the center will determine the size of your shape, and moving your cursor around will rotate it accordingly. This tool is also optionally snap to grid and offers Subtractive mode.</p>
        <h5>Hatching</h5>
        <p>The Hatching tool allows you to fill in just the hatching layer without drawing anything else. You can also change the style of hatching as well as the floor style here. Hatching is specific to the layer you're working on, and all layers can have different hatch styles. This allows for lots of different map appearances, not just hand drawn styles.</p>
        <h5>Stamp Tool</h5>
        <p>The Stamp tool is how you go about adding any sort of details to your maps like doors, staircases, furniture and hazards/traps. Clicking on a stamp in the toolbox will select that stamp. You can also click on the "Current Stamp" icon to show a larger selection popup with a search tool. Stamps are organized into categories based on their purpose, and clicking the header of a section will expand/collapse the section. Once a stamp has been placed, you can click and drag to move it around. Clicking on a stamp will select it, allowing you to rotate it by clicking and dragging the little red circle near the stamp. You can delete a placed stamp by selecting it and clicking the little garbage can button beside the current stamp in the toolbox.</p>
        <h5>Erase Tool</h5>
        <p>The Erase tool can be used to erase all aspects of your map depending on which parts are selected. There's checkboxes for Hatching, Outline, Rooms and Stamps, allowing you to choose one or more specific pieces of the map to erase.</p>
        <h5>Text Tool</h5>
        <p>The Text tool lets you write text on your map in various different fonts. Clicking on the map will show the edit popup for text, letting you write the text you want, choose a font size and font. Clicking okay will create a text object on the screen which you can then click and drag to move to wherever you want. Clicking on existing text will show the edit popup again, allowing you to change any aspects of the text, or delete the text object</p>
        
    </div>
    <div class='popupFooter' style='padding-top: 8px;text-align: center'>
        <button type="button" class="canvBtn" onclick="ir.hide('howToPopup');doodler.popupShowing = false;">Close</button>
    </div>
</div>

<div id='stampPopup' class='popupPanel' style='display:none;text-align: center'>
    <input type='text' style='padding:6px;font-size: 16pt;width:100%;' id='stampSearch' placeholder="Search by stamp name" oninput="Modes.StampTool.searchStamp(event)">
    <div id="stampPopupList" style="max-height: calc( 100% - 100px ); overflow: auto;"></div>
    <div class='popupFooter' style='padding-top: 8px'>
        <button type="button" class="canvBtn" onclick="Modes.StampTool.addStamp(true);doodler.popupShowing = false;">Add Stamp</button>
        <button type="button" class="canvBtn" onclick="ir.hide('stampPopup');doodler.popupShowing = false;">Cancel</button>
    </div>
</div>




<div id='textPopup' style='border-style:double;background-color:#fff;display:none;z-index:10000;width:auto;max-width:600px;height:auto;position:fixed;left:35%; top:20%'>
	<table>
		<tr>
			<td class='tdr'>Text:</td>
			<td class='tdl'><textarea rows='2' id='textPopupVal' style="font-family: 'Times New Roman';font-size:18pt" placeholder='Write your text here'></textarea></td>
		</tr>
		<tr>
			<td class='tdr'>Vertical Text:</td>
			<td class='tdl'><input type="checkbox" id="drawVerticalText" >Draw text vertically</td>
		</tr>
		<tr>
			<td class='tdr'>Font Size</td>
			<td class='tdl'><input type='number' value='40' id='textPopupFontSize'/></td>
		</tr>
        <tr>
			<td class='tdr'>Justification:</td>
			<td class='tdl'>
				<input type="radio" id="textPopupLeft" checked='checked' name="textPopupJustify" value="left" >
				<label for="textPopupLeft">Left</label>
				<input type="radio" id="textPopupCenter" name="textPopupJustify" value="center" >
				<label for="textPopupCenter">Center</label>
				<input type="radio" id="textPopupRight" name="textPopupJustify" value="right" >
				<label for="textPopupRight">Right</label>
			</td>
		</tr>
		<tr>
			<td class='tdr'>Font</td>
			<td class='tdl'><select id="textPopupFont" onchange="Modes.TextTool.changeFontPopup(event, 'textPopupVal')">
				<option value='Times New Roman'>Times New Roman</option>
				<option value='Arial'>Arial</option>
				<option value='Helvetica'>Helvetica</option>
				<option value='mono'>Monospace</option>
				<option value='blacklet'>Handwritten Calligraphy</option>
				<option value='handwriting_main'>Handwritten</option>
				<option value='arush_shiny'>Arush Shiny</option>
				<option value='castaway'>Castaway Fill</option>
				<option value='castaway_inline'>Castaway Inline</option>
				<option value='decorative_stencil'>Decorative Stencil</option>
				<option value='gamejot'>Gamejot</option>
				<option value='nerik'>Nerik</option>
				<option value='pioneer'>Pioneer</option>
				<option value='Metal_Mania'>Metal Mania</option>
				<option value='Bangers'>Bangers</option>
				<option value='Hobbiton'>Hobbiton Brush Hand</option>
				<option value='Tengwar'>Tengwar Annatar</option>
				<option value='Tengwar_i'>Tengwar Annatar Italic</option>
				<option value='Rune'>Rune</option>
				</select></td>
		</tr>
	</table>
	<button type="button" class="canvBtn" onclick="doodler.applyTextPopup()">Okay</button>
	<button type="button" class="canvBtn" onclick="doodler.cancelTextPopup();doodler.popupShowing=false;">Cancel</button>
</div>

<div id='textEditPopup' style='border-style:double;background-color:#fff;display:none;z-index:10000;width:auto;height:auto;position:fixed;left:35%; top:20%'>
	<table>
		<tr>
			<td class='tdr'>Text:</td>
			<td class='tdl'><textarea style='font-size:18pt;' rows='2' id='textEditVal' placeholder='Write your text here'></textarea></td>
		</tr>
		<tr>
			<td class='tdr'>Vertical Text:</td>
			<td class='tdl'><input type="checkbox" id="textEditVert" >Draw text vertically</td>
		</tr>
		<tr>
			<td class='tdr'>Font Size</td>
			<td class='tdl'><input type='number' value=14 id='textEditFontSize'/></td>
		</tr>
        <tr>
			<td class='tdr'>Justification:</td>
			<td class='tdl'>
				<input type="radio" id="textEditLeft" checked='checked' name="textEditJustify" value="left" >
				<label for="textEditLeft">Left</label>
				<input type="radio" id="textEditCenter" name="textEditJustify" value="center" >
				<label for="textEditCenter">Center</label>
				<input type="radio" id="textEditRight" name="textEditJustify" value="right" >
				<label for="textEditRight">Right</label>
			</td>
		</tr>
		<tr>
			<td class='tdr'>Font</td>
			<td class='tdl'><select id="textEditFont" onchange="Modes.TextTool.changeFontPopup(event, 'textEditVal')">
				<option value='Times New Roman'>Times New Roman</option>
				<option value='Arial'>Arial</option>
				<option value='Helvetica'>Helvetica</option>
				<option value='mono'>Monospace</option>
				<option value='blacklet'>Handwritten Calligraphy</option>
				<option value='handwriting_main'>Handwritten</option>
				<option value='arush_shiny'>Arush Shiny</option>
				<option value='castaway'>Castaway Fill</option>
				<option value='castaway_inline'>Castaway Inline</option>
				<option value='decorative_stencil'>Decorative Stencil</option>
				<option value='gamejot'>Gamejot</option>
				<option value='nerik'>Nerik</option>
				<option value='pioneer'>Pioneer</option>
				<option value='Metal_Mania'>Metal Mania</option>
				<option value='Bangers'>Bangers</option>
				<option value='Hobbiton'>Hobbiton Brush Hand</option>
				<option value='Tengwar'>Tengwar Annatar</option>
				<option value='Tengwar_i'>Tengwar Annatar Italic</option>
				<option value='Rune'>Rune</option>
				</select></td>
		</tr>
	</table>
	<input type='number' value=0 id='textEditId' style="display:none"/>
	<button type="button" class="canvBtn" onclick="doodler.applyEditTextPopup()">Okay</button>
	<button type="button" class="canvBtn" onclick="doodler.applyDeleteTextPopup()">Delete</button>
	<button type="button" class="canvBtn" onclick="doodler.applyCancelTextPopup()">Cancel</button>
</div>

<div id='wallEditPopup' style='border-style:double;background-color:#fff;display:none;z-index:10000;width:auto;height:auto;position:fixed;left:35%; top:20%'>
	<table>
		<tr>
			<td class='tdr'>Width in feet: </td>
			<td class='tdl'><input type="number" id="wallEditWidth" ></td>
		</tr>
		<tr>
			<td class='tdr'>Height in feet: </td>
			<td class='tdl'><input type='number' id='wallEditHeight'/></td>
		</tr>
	</table>
	<input type='number' value=0 id='wallEditId' style="display:none"/>
	<button type="button" class="canvBtn" onclick="doodler.applyEditWallPopup()">Okay</button>
	<button type="button" class="canvBtn" onclick="doodler.applyDeleteWallPopup()">Delete</button>
	<button type="button" class="canvBtn" onclick="doodler.applyCancelWallPopup()">Cancel</button>
</div>

<div id='locEditPopup' style='border-style:double;background-color:#fff;display:none;z-index:10000;width:auto;height:auto;position:fixed;left:35%; top:20%'>
	<table>
		<tr>
			<td class='tdr'>Width in feet: </td>
			<td class='tdl'><input type="number" id="locEditWidth" ></td>
		</tr>
		<tr>
			<td class='tdr'>Height in feet: </td>
			<td class='tdl'><input type='number' id='locEditHeight'/></td>
		</tr>
		<tr>
			<td class='tdr'>Location: </td>
			<td class='tdl' id="locEditCell"></td>
		</tr>
	</table>
	<input type='number' value=0 id='locEditId' style="display:none"/>
	<input type='number' value=0 id='locEditDeleteOnCancel' style="display:none"/>
	<button type="button" class="canvBtn" onclick="doodler.applyEditLocPopup()">Okay</button>
	<button type="button" class="canvBtn" onclick="doodler.applyDeleteLocPopup()">Delete</button>
	<button type="button" class="canvBtn" onclick="doodler.applyCancelLocPopup()">Cancel</button>
</div>
	
<div id='imageSavePopup' class='popupPanel' style='display:none;text-align: center'>
	<h2>Export Image File</h2>
	<table>
		<tr>
			<td class='tdr'>File Name:</td>
			<td class='tdl'>
				<input type="text" id="imageSaveName" value='DungeonMapDoodle' >
			</td>
		</tr>
		<tr>
			<td class='tdr'>Background Colour:</td>
			<td class='tdl'><!--<input type='color' value='rgb()' id='imageSaveColor'/>-->
				<input type="radio" id="imageSaveColorWhite" name="imageSaveColor" checked='checked' value="color" >
				<label for="imageSaveColorWhite">Coloured <input type='color' value='#ffffff' id='imageSaveColorColor'></label><br>
				<input type="radio" id="imageSaveColorTrans" name="imageSaveColor" value="rgba(0,0,0,0)" >
				<label for="imageSaveColorTrans">Transparent</label><br>
			</td>
		</tr>
        <tr>
			<td class='tdr'>File Type:</td>
			<td class='tdl'>
				<input type="radio" id="imageSaveFilePng" checked='checked' name="imageSaveFile" value="image/png" >
				<label for="imageSaveFilePng">PNG</label>
				<input type="radio" id="imageSaveFileJpeg" name="imageSaveFile" value="image/jpeg" >
				<label for="imageSaveFileJpeg">JPG</label>
				<input type="radio" id="imageSaveFileBmp" name="imageSaveFile" value="image/bmp" >
				<label for="imageSaveFileBmp">BMP</label>
			</td>
		</tr>
	</table>
	<button type="button" class="canvBtn" onclick="doodler.saveImageConfirm()">Save</button>
	<button type="button" class="canvBtn" onclick="doodler.saveImageConfirm(true)">Print</button>
	<button type="button" class="canvBtn" onclick="ir.hide('imageSavePopup');doodler.popupShowing=false;">Cancel</button>
</div>
    
<div id='imageExportPopup' class='popupPanel' style='display:none;text-align: center'>
	<h2>Publish Image File</h2>
	<table>
        <tr><td colspan="2">This will publish your map image to fictionalmaps.com, an online map viewer similar to Google Maps</td></tr>
		<tr>
			<td class='tdr'>File Name:</td>
			<td class='tdl'>
				<input type="text" id="imageExportName" value='DungeonMapDoodle' >
			</td>
		</tr>
		<tr>
			<td class='tdr'>Background Colour:</td>
			<td class='tdl'><!--<input type='color' value='rgb()' id='imageSaveColor'/>-->
				<input type="radio" id="imageExportColorWhite" name="imageExportColor" checked='checked' value="color" >
				<label for="imageExportColorWhite">Coloured <input type='color' value='#ffffff' id='imageExportColorColor'></label><br>
				<input type="radio" id="imageExportColorTrans" name="imageExportColor" value="rgba(0,0,0,0)" >
				<label for="imageExportColorTrans">Transparent</label><br>
			</td>
		</tr>
        <div style='width:100%'><div id="exportWait" class="loader" style="display:none;"></div></div>
	</table>
	<button type="button" class="canvBtn" onclick="doodler.exportImageConfirm()">Publish</button>
	<button type="button" class="canvBtn" onclick="ir.hide('imageExportPopup');doodler.popupShowing=false;">Cancel</button>
</div>
    
<div id='randomGenPopup' class='popupPanel' style='display:none;text-align: center'>
	<h2>Generate Random Dungeon</h2>
	<table><!-- //Options from user
        //Width
        //Height
        //Linear/Sprawling, number of rooms, room size -->
        <!--<tr><td colspan="2">Use these parameters to edit </td></tr>-->
        <tr><td colspan="2">Use this to create a randomly generated dungeon. Changing the parameters below will affect the generated dungeon. You can also use Ctrl 0 to keep generating new ones without returning to this popup.</td></tr>
		<tr>
			<td class='tdr'>Width:</td>
			<td class='tdl'>
				<input type="number" id="randomGenWidth" value='30' min="15" >
			</td>
		</tr>
        <tr>
			<td class='tdr'>Height:</td>
			<td class='tdl'>
				<input type="number" id="randomGenHeight" value='30' min="15" >
			</td>
		</tr>
        <tr>
			<td class='tdr'>Number of Rooms:</td>
			<td class='tdl'>
				<input type="number" id="randomGenNumRooms" value='15' >
			</td>
		</tr>
        <tr>
			<td class='tdr'>Room Size:</td>
			<td class='tdl'>
				<input type="number" id="randomGenRoomSize" value='6' >
			</td>
		</tr>
        <tr>
			<td class='tdr'>Amount of Content:</td>
			<td class='tdl'>
                <input type="radio" id="randomGenStuffNone"  name="randomGenStuff" value="0" >
				<label for="randomGenStuffNone">None</label>
				<input type="radio" id="randomGenStuffSome" name="randomGenStuff" value="1" >
				<label for="randomGenStuffSome">Some</label>
				<input type="radio" id="randomGenStuffLots" checked='checked' name="randomGenStuff" value="2" >
				<label for="randomGenStuffLots">Lots</label>
			</td>
		</tr>
        <tr>
			<td class='tdr'>Include Monsters:</td>
			<td class='tdl'>
				<input type="checkbox" checked='checked' id="randomGenAddMonsters"  >
			</td>
		</tr>
		
        <div style='width:100%'><div id="exportWait" class="loader" style="display:none;"></div></div>
	</table>
	<button type="button" class="canvBtn" onclick="doodler.generateDungeon()">Generate</button>
	<button type="button" class="canvBtn" onclick="ir.hide('randomGenPopup');doodler.popupShowing=false;">Cancel</button>
</div>
    
    
<div id='donJonPopup' class='popupPanel' style='display:none;text-align: center'>
	<h2>Import donjon Dungeon</h2>
	<table>
        <tr><td colspan="2">Edit any parameters before importing map from donjon</td></tr>
		<tr>
			<td class='tdr'>Wall Thickness:</td>
			<td class='tdl'><input type="number" id="donJonBorder" value='3' ></td>
		</tr>
        <tr>
			<td class='tdr'>Grid Outset:</td>
			<td class='tdl'><input type="number" id="donJonInset" value='0' ></td>
		</tr>
		<tr>
			<td class='tdr'>Fill Colour:</td>
			<td class='tdl'><input type='color' value='#ffffff' id='donJonFillColor'></td>
		</tr>
		<tr>
			<td class='tdr'>Wall Colour:</td>
			<td class='tdl'><input type='color' value='#000000' id='donJonWallColor'></td>
		</tr>
	</table>
	<button type="button" class="canvBtn" onclick="doodler.applyDonJonPopup()">Okay</button>
	<button type="button" class="canvBtn" onclick="ir.hide('donJonPopup');doodler.popupShowing=false;">Cancel</button>
</div>
    
<div style='display: none'>
    <form id='fictionalMapsForm' action="https://fictionalmaps.com/wp-content/plugins/fictional-maps-handler/php/receiver/xs_receiver.php" method="post" enctype="multipart/form-
    data">
    <input type="text" name="map_name" id="map_name"/>
    <input type="hidden" name="origin" id="origin" value="DMD"/>
    <input type="hidden" name="claim_token" id="claim_token" value=""/>
    <input type="hidden" name="security_token" id="security_token" value=""/>
    <!--<input type="file" name="map_file" id="map_file" />-->
    <input type="submit" value="Publish to Fictionalmaps.com" name="publish"
    id="fictionalMapSubmit"/>
    </form>
</div>
	
<div id='creditPopup' style='border-style:double;background-color:#fff;display:none;z-index:5000;width:auto;height:auto;position:fixed;left:35%; top:20%'>
	<h2>Credits</h2>
	<a href="https://www.freepik.com/free-photos-vectors/background">Background vector created by 0melapics - www.freepik.com</a>
    <a href='https://www.freepik.com/free-photos-vectors/background'>Background vector created by 0melapics - www.freepik.com</a>
</div>

<div id='dimensionPopup' class='newPopupPanel' style='display:none;text-align: center'>
    <h2>Create New Map</h2>
	<table>
		<tr>
			<td class='tdr'>Width in Feet:</td>
			<td class='tdl'><input type="number" id="dimensionPopupX" value='10'></td>
		</tr>
		<tr>
			<td class='tdr'>Height in Feet:</td>
			<td class='tdl'><input type="number" id="dimensionPopupY" value='10'></td>
		</tr>
        <tr>
			<td class='tdr'>Feet Per Box:</td>
			<td class='tdl'><input type="number" value='5' id="dimensionPopupStep" ></td>
		</tr>
        <tr>
			<td class='tdr'>Box Size in Pixels:</td>
			<td class='tdl'><input type="number" value='5' id="dimensionPopupBoxSize" ></td>
		</tr>
        <tr id='newMapWarn' style='display:none;'><td colspan='2'>Warning: this will clear out any doodles you currently have, be sure to save</td></tr>
	</table>
    
	<button type="button" class="canvBtn" onclick="doodler.applyDimensions()">Okay</button>
	<button type="button" class="canvBtn" onclick="ir.hide('dimensionPopup');doodler.popupShowing=false;">Cancel</button>
</div>
	
<div style='display:none'>
	<a id='link'></a>
	<input type='file' id="stampUpload" accept="image/gif, image/jpeg, image/png, image/svg"/>
</div>
	
<div class='floatingControlsLeft'>
	<div class='floatBtn' onclick="doodler.zoom(1, true)"><img title="Zoom In" src='images/plus.png' width='40px' height='40px'></div>
	<div class='floatBtn' onclick="doodler.zoom(-1, true)"><img title="Zoom Out" src='images/minus.png' width='40px' height='40px'></div>
	<div id='zoomSizeLabel' style='font-size: 9pt'></div>
	<div class='floatBtn' onclick="doodler.undo()"><img title='Undo' src='images/undo.png' width='40px' height='40px'></div>
	<div class='floatBtn' onclick="doodler.redo()"><img title="Redo" src='images/redo.png' width='40px' height='40px'></div>
	
	
</div>	
    
<div id="errorBox" style='display:none;position:fixed;bottom:0;left:0;right:0;width:100%;height:80px;background-color:azure'></div>
	
	
<div class="floatingModes popup" id='floatingModes'>
	<button id='dockOpenCloseBtn' class='modeBtn' style='background-color:ghostwhite;padding:0;margin-left: 0px;float:left;outline:none;' type="button" onclick="doodler.toggleDockOpen()"><img id='dockOpenCloseImg' src="close.png" width='32px' height='32px'></button>
	<div class='floatingContainer'>
        <details id='globalDetails'>
            <summary>Global Options</summary>
            <div class='paramTitle'>Style Preset</div><select id='stylePresetSelect' style='max-width:140px;' onchange='doodler.changeStylePreset(event)'>
            </select><br>
            <div class='paramTitle'>Overlay</div><br><select id='overlayStyle' style='max-width:140px;' onchange='doodler.changeOverlayStyle(event)'>
			<option name='' value=''>None</option>
			<option name='Parchment White' value='overlays/white-parchment-paper-texture.jpg'>Parchment White</option>
			<option name='Parchment Yellow' value='overlays/parchment-paper-light-texture.jpg'>Parchment Yellow</option>
			<option name='Parchment Charcoal' value='overlays/charcoal-parchment.jpg'>Parchment Charcoal</option>
			<option name='Parchment Gray' value='overlays/gray-parchment.jpg'>Parchment Gray</option>
			<option name='Parchment Black' value='overlays/black-parchment.jpg'>Parchment Black</option>
			<!--<option name='Leaf' value='overlays/leaf-texture.jpg'>Leaf</option>-->
			<option name='Sandstone' value='overlays/tan-sandstone-texture.jpg'>Sandstone</option>
			<option name='Wood' value='overlays/wood-grain.jpg'>Wood Grain</option>
			<option name='Barn' value='overlays/barn-board.jpg'>Barn Board</option>
			<option name='Metal' value='overlays/metal-texture.jpg'>Metal</option>
			<option name='Brick' value='overlays/brick-texture.jpg'>Brick</option>
			<option name='Stucco' value='overlays/textured-stucco-wall-white.jpg'>Stucco Wall</option>
			<option name='Woven' value='overlays/white-woven-fabric-close-up-texture.jpg'>Woven Fabric</option>
			<option name='Blueprint' value='overlays/blueprint.png'>Blueprint</option>
            </select><br>
            <div class='paramTitle'>Blend Mode</div><br><select id='overlayBlend' style='max-width:140px;' onchange='doodler.changeOverlayBlend(event)'>
			<option name='Multiply' value='multiply'>Multiply</option>
			<option name='Lighter' value='lighter'>Lighter</option>
			<option name='Lighten' value='lighten'>Lighten</option>
			<option name='Screen' value='screen'>Screen</option>
			<option name='Darken' value='darken'>Darken</option>
			<option name='Overlay' value='overlay'>Overlay</option>
			<option name='Colour Dodge' value='color-dodge'>Colour Dodge</option>
			<option name='Colour Burn' value='color-burn'>Colour Burn</option>
			<option name='Difference' value='difference'>Difference</option>
			<option name='Hue' value='hue'>Hue</option>
			<option name='Saturation' value='saturation'>Saturation</option>
			<option name='Colour' value='color'>Colour</option>
			<option name='Luminosity' value='luminosity'>Luminosity</option>
            </select>
        </details>
		<details open id='layerDetails'>
			<summary>Layer Options</summary>
			<div id="layerList"></div>
			<div class='layerBtns'>
				<div class='modeBtn' title="Add Layer" onclick='doodler.addLayer()'><img src="images/layeradd.png" width='32px' height='32px'></div><div class='modeBtn' title="Delete Layer" onclick='doodler.deleteLayer()'><img src="images/layerdelete.png" width='32px' height='32px'></div><div class='modeBtn' title="Raise Layer" onclick='doodler.raiseLayer()'><img src="images/raise.png" width='32px' height='32px'></div><div class='modeBtn' title="Lower Layer" onclick='doodler.lowerLayer()'><img src="images/lower.png" width='32px' height='32px'></div>
				</div>
		</details>
		<details open id='toolDetails'>
			<summary>Tool Options</summary>
			<div id='toolFlexbox' style='display:flex'>
				<div class='floatingBtns'>
                    <div class='modeBtn tooltip' title="Move" id='modeMove' onclick='doodler.clickMode(event)'><div class="left"><h3>Move</h3><ul><li>[M] to select tool</li><li>Click and drag to pan around canvas</li></ul><i></i></div><img id='imgmMove' src="move.png" width='32px' height='32px'></div>
                    <div class='modeBtn tooltip' title="Free Draw" id='modeDoodle' onclick='doodler.clickMode(event)'><div class="left"><h3>Free Draw</h3><ul><li>[D] to select tool</li><li>Draw freely around the canvas</li></ul><i></i></div><img id='imgmDoodle' src="doodle.png" width='32px' height='32px'></div>
                    <div class='modeBtn tooltip' title="Snap To Grid" id='modeSnapToGrid' onclick='doodler.clickMode(event)'><div class="left"><h3>Snap To Grid</h3><ul><li>[G] to select tool</li><li>Draw locked to the grid</li></ul><i></i></div><img id='imgmSnapToGrid' src="snaptogrid.png" width='32px' height='32px'></div>
                    <div class='modeBtn tooltip' title="Line Tool" id='modeLine' onclick='doodler.clickMode(event)'><div class="left"><h3>Line Tool</h3><ul><li>[L] to select tool</li><li>Click and drag to draw straight line</li></ul><i></i></div><img id='imgmLine' src="line.png" width='32px' height='32px'></div>
                    <div class='modeBtn tooltip' title="Wall Tool" id='modeWall' onclick='doodler.clickMode(event)'><div class="left"><h3>Interior Wall Tool</h3><ul><li>[W] to select tool</li><li>Click and drag to draw straight walls inside of a room</li></ul><i></i></div><img id='imgmWall' src="wall.png" width='32px' height='32px'></div>
                    <div class='modeBtn tooltip' title="Room Tool" id='modeRoomTool' onclick='doodler.clickMode(event)'><div class="left"><h3>Room Tool</h3><ul><li>[R] to select tool</li><li>Click and drag to select entire room at once, release to draw</li><li>Hold Shift to enable subtractive mode</li></ul><i></i></div><img id='imgmRoomTool' src="roomtool.png" width='32px' height='32px'></div>
                    <div class='modeBtn tooltip' title="Shape Tool" id='modeShapeTool' onclick='doodler.clickMode(event)'><div class="left"><h3>Shape Tool</h3><ul><li>[P] to select tool</li><li>Click and drag to draw shape, starting point will be the center of the shape, drag outwards to change size and rotation</li><li>Hold Shift to enable subtractive mode</li></ul><i></i></div><img id='imgmShapeTool' src="shapetool.png" width='32px' height='32px'></div>
                    <div class='modeBtn tooltip' title="Hatching" id='modeHatching' onclick='doodler.clickMode(event)'><div class="left"><h3>Hatching</h3><ul><li>[H] to select tool</li><li>Draw hatching layer without drawing anything else. Change hatching style and floor tile for selected layer here</li></ul><i></i></div><img id='imgmHatching' src="hatch.png" width='32px' height='32px'></div>
                    <div class='modeBtn tooltip' title="Stamps" id='modeStampTool' onclick='doodler.clickMode(event)'><div class="left"><h3>Stamps</h3><ul><li>[S] to select tool</li><li>Click to place a stamp. Click an already placed stamp to select it. Drag red circle to rotate stamp.</li><li>Hold Shift to toggle between snapping and not</li></ul><i></i></div><img id='imgmStampTool' src="stamp.png" width='32px' height='32px'></div>
                    <div class='modeBtn tooltip' title="Text Tool" id='modeTextTool' onclick='doodler.clickMode(event)'><div class="left"><h3>Text Tool</h3><ul><li>[T] to select tool</li><li>Click to create a text object. Click existing text object to edit and delete. Click and drag a text object to move</li></ul><i></i></div><img id='imgmTextTool' src="images/texttool.png" width='32px' height='32px'></div>
                    <div class='modeBtn tooltip' title="Erase" id='modeErase' onclick='doodler.clickMode(event)'><div class="left"><h3>Erase</h3><ul><li>[E] to select tool</li><li>Use the erase tool to erase floors, outlines, hatching and stamps. Checkboxes are available to choose exactly what you want to erase</li></ul><i></i></div><img id='imgmErase' src="erase.png" width='32px' height='32px'></div>
				</div>
				<div class='paramBox' id='paramBox'></div>
			</div>
		</details>
	</div>
</div>	
	
	
	
<div id='passwordPrompt' style='padding-top:80px;text-align: center;display:none;position:fixed;width:100%;height:100%;left:0;top:0;background-color:white;'>
	
	Please enter the password to access Dungeon Map Doodler beta
	<div style='margin-left:auto;margin-right:auto;width:30%'><table>
		<tr>
			<td class='tdr'>Password</td>
			<td class='tdl'><input type='text'  id='passwordPromptInput'/></td>
		</tr>
		<tr>
			<td colspan='2' class='tdc' id='passwordError'></td>
		</tr>
		<tr>
			<td><button type="button" class="canvBtn" onclick="doodler.showPasswordPromptCallback()">Okay</button></td>
		</tr>
	</table></div>
	
</div>
    

	
<script type="text/javascript">
    window.onbeforeunload = function() {
        return "Are you sure you want to leave the page? Anything unsaved will be lost";
    }
</script>	
	
<script src='irutil.js'></script>
<script src='irstore.js'></script>
<script src='keyedarray.js'></script>
<script src='smoothpopup.js'></script>
<script src='dmd.js'></script>
<script src='stylepresets.js'></script>
<script src='stamps.js'></script>
<script src='dungeonrooms.js'></script>
<script src='modedoodle.js'></script>
<script src='modeerase.js'></script>
<script src='modehatching.js'></script>
<script src='modeline.js'></script>
<script src='modewall.js'></script>
<script src='modemove.js'></script>
<script src='moderoomtool.js'></script>
<script src='modesnaptogrid.js'></script>
<script src='modeshapetool.js'></script>
<script src='modetext.js'></script>
<script src='modestamps.js'></script>
<script src='modes.js'></script>
<script src="warehouseMap.js"></script>  
<script src="warehouseMap2.js"></script>
<script>
  if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
  navigator.serviceWorker.register('service-worker.js').then(function(registration) {
  // Registration was successful
  console.log('Registered!');
  }, function(err) {
  // registration failed :(
  console.log('ServiceWorker registration failed: ', err);
  }).catch(function(err) {
  console.log(err);
  });
  });
  } else {
  console.log('service worker is not supported');
  }
  </script>

	
<!-- Start Open Web Analytics Tracker -->
<script type="text/javascript">
//<![CDATA[
var owa_baseUrl = 'https://uncon.ca/openwebanalytics/';
var owa_cmds = owa_cmds || [];
owa_cmds.push(['setSiteId', 'ffb87c343d5de595b88243c63a1ca70d']);
owa_cmds.push(['trackPageView']);
owa_cmds.push(['trackClicks']);

(function() {
	var _owa = document.createElement('script'); _owa.type = 'text/javascript'; _owa.async = true;
	owa_baseUrl = ('https:' == document.location.protocol ? window.owa_baseSecUrl || owa_baseUrl.replace(/http:/, 'https:') : owa_baseUrl );
	_owa.src = owa_baseUrl + 'modules/base/js/owa.tracker-combined-min.js';
	var _owa_s = document.getElementsByTagName('script')[0]; _owa_s.parentNode.insertBefore(_owa, _owa_s);
}());
//]]>
</script>

</body>
</html>